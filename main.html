<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZK-Auth: Data Flow Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;450;700&display=swap" rel="stylesheet">
    <style>
        :root { --yonsei-blue: #003876; --gold: #d4af37; --supabase: #3ecf8e; --render: #46e3b7; --bg: #f4f7f9; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); margin: 0; color: #333; }
        
        header { background: var(--yonsei-blue); color: white; padding: 40px 20px; text-align: center; border-bottom: 5px solid var(--gold); position: relative; }
        .logout-btn { position: absolute; top: 20px; right: 20px; padding: 8px 16px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.4); border-radius: 4px; cursor: pointer; }

        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        section { background: white; border-radius: 16px; padding: 40px; margin-bottom: 30px; box-shadow: 0 8px 30px rgba(0,0,0,0.05); }
        h2 { color: var(--yonsei-blue); border-left: 5px solid var(--gold); padding-left: 15px; margin-bottom: 30px; }

        /* í”„ë¡œì„¸ìŠ¤ ë§µ ìŠ¤íƒ€ì¼ */
        .process-box { border: 1px solid #eee; border-radius: 12px; padding: 25px; margin-bottom: 20px; background: #fff; position: relative; }
        .process-title { font-weight: 700; color: var(--yonsei-blue); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        
        .data-flow { display: flex; align-items: center; gap: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 0.9rem; margin-top: 10px; }
        .data-tag { background: #eef2f7; color: #444; padding: 4px 10px; border-radius: 4px; border: 1px solid #d1d9e4; font-weight: 600; }
        .arrow-text { color: var(--yonsei-blue); font-weight: bold; font-size: 1.2rem; }

        /* ë¡œê·¸ì¸ ì„±ê³µ ë°°ì§€ */
        .success-banner { background: #e7f9ed; border: 1px solid var(--supabase); color: #1e7e34; padding: 20px; border-radius: 12px; text-align: center; font-weight: 700; margin-bottom: 30px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { font-size: 0.85rem; color: #888; text-transform: uppercase; }
    </style>
</head>
<body>

<header>
    <button class="logout-btn" onclick="location.href='index.html'">LOGOUT</button>
    <h1>ZK-Auth ì‹¤ì‹œê°„ ë°ì´í„° ì›Œí¬í”Œë¡œìš°</h1>
    <div class="system-status" id="welcomeUser">ì¸ì¦ ì‹œìŠ¤í…œ ê°€ë™ ì¤‘</div>
</header>

<div class="container">
    
    <div class="success-banner">
        ğŸ‰ ì¸ì¦ ì„±ê³µ: ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ë¸Œë¼ìš°ì € ì™¸ë¶€ë¡œ ë‹¨ 1ë°”ì´íŠ¸ë„ ì „ì†¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
    </div>

    <section>
        <h2>Step 1. íšŒì›ê°€ì… (Registration)</h2>
        <div class="process-box">
            <div class="process-title">ğŸ’¾ ë°ì´í„° ì €ì¥ ë‹¨ê³„</div>
            <p>ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹œí™”í•˜ì—¬ <b>Supabase</b>ì— ì˜êµ¬ ì €ì¥í•©ë‹ˆë‹¤.</p>
            <div class="data-flow">
                <span class="data-tag">Browser</span> 
                <span class="arrow-text">â”€â”€ { ID, Poseidon(PW) } â”€â”€â–¶</span> 
                <span class="data-tag" style="background: #e6fffa;">Supabase DB</span>
            </div>
            <p style="font-size: 0.8rem; color: #888; margin-top: 10px;">* ì„œë²„ëŠ” ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ ëŒ€ì‹  ìˆ˜í•™ì  ì§€ë¬¸(Hash)ë§Œ ì†Œìœ í•©ë‹ˆë‹¤.</p>
        </div>
    </section>

    <section>
        <h2>Step 2. ë¡œê·¸ì¸ ë° ì¦ëª… ìƒì„± (Proving)</h2>
        <div class="process-box">
            <div class="process-title">ğŸ§  ë¸Œë¼ìš°ì € ë‚´ ì¦ëª… ì—°ì‚°</div>
            <p>DBì—ì„œ í•´ì‹œë¥¼ ê°€ì ¸ì™€ <b>ì‚¬ìš©ìì˜ PC</b>ì—ì„œ ì¦ëª…ì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
            <div class="data-flow">
                <span class="data-tag">Supabase</span> 
                <span class="arrow-text">â”€â”€ [SavedHash] â”€â”€â–¶</span> 
                <span class="data-tag" style="background: #fff9db;">Browser (snarkjs)</span>
            </div>
            <div style="margin-top: 15px; padding: 10px; background: #fff5f5; border-radius: 6px; font-size: 0.85rem;">
                <b>ë‚´ë¶€ ì—°ì‚°:</b> f(ì…ë ¥PW, SavedHash, zKey) â” <span style="color: #e03131;">Proof</span> ìƒì„± ì™„ë£Œ
            </div>
        </div>
    </section>

    <section>
        <h2>Step 3. ê²€ì¦ ë° ë¡œê·¸ì¸ ì„±ê³µ (Verification)</h2>
        <div class="process-box">
            <div class="process-title">ğŸ›¡ï¸ Render ì„œë²„ ê²€ì¦</div>
            <p>ìƒì„±ëœ ì¦ëª…ì„œë¥¼ <b>Render Node ì„œë²„</b>ì— ë³´ë‚´ ìµœì¢… ìŠ¹ì¸ì„ ë°›ìŠµë‹ˆë‹¤.</p>
            <div class="data-flow">
                <span class="data-tag">Browser</span> 
                <span class="arrow-text">â”€â”€ [Proof, PublicSignals] â”€â”€â–¶</span> 
                <span class="data-tag" style="background: #e3fafd;">Render Server</span>
            </div>
            <div class="data-flow" style="margin-top: 15px;">
                <span class="data-tag">Render Server</span> 
                <span class="arrow-text">â”€â”€ "Login Success (JWT/Session)" â”€â”€â–¶</span> 
                <span class="data-tag">Browser</span>
            </div>
        </div>
    </section>

    <section>
        <h2>ì£¼ê³ ë°›ëŠ” ë°ì´í„° ìš”ì•½</h2>
        <table>
            <thead>
                <tr>
                    <th>í•­ëª©</th>
                    <th>ì „ì†¡ë˜ëŠ” ë°ì´í„°</th>
                    <th>ì ˆëŒ€ ì „ì†¡ë˜ì§€ ì•ŠëŠ” ë°ì´í„°</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>íšŒì›ê°€ì…</b></td>
                    <td>ID, Poseidon Hash (ê¸°ì¤€ê°’)</td>
                    <td><b>ë¹„ë°€ë²ˆí˜¸ (Plain Text)</b></td>
                </tr>
                <tr>
                    <td><b>ë¡œê·¸ì¸</b></td>
                    <td>zk-SNARK Proof (ì¦ëª…ì„œ)</td>
                    <td><b>ë¹„ë°€ë²ˆí˜¸ (Plain Text)</b></td>
                </tr>
            </tbody>
        </table>
    </section>

</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get('user') || 'User';
    document.getElementById('welcomeUser').textContent = `${username.toUpperCase()} ë‹˜ì˜ ì¸ì¦ ë°ì´í„° ë¶„ì„`;
</script>

</body>
</html>
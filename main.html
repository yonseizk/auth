<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZK-Auth System Architecture & Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;450;700&display=swap" rel="stylesheet">
    <style>
        :root { --yonsei-blue: #003876; --gold: #d4af37; --render-teal: #46e3b7; --supabase-green: #3ecf8e; --tech-gray: #f4f7f9; --danger: #e74c3c; }
        body { font-family: 'Pretendard', sans-serif; background: var(--tech-gray); margin: 0; color: #333; line-height: 1.6; }
        
        header { background: var(--yonsei-blue); color: white; padding: 50px 20px; text-align: center; border-bottom: 5px solid var(--gold); position: relative; }
        header h1 { margin: 0; font-size: 2.2rem; }
        .system-status { display: inline-block; background: rgba(255,255,255,0.15); padding: 8px 20px; border-radius: 30px; font-size: 0.9rem; margin-top: 15px; border: 1px solid rgba(255,255,255,0.3); }

        /* 로그아웃 버튼 */
        .logout-btn { position: absolute; top: 20px; right: 20px; padding: 10px 20px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.5); border-radius: 5px; cursor: pointer; font-size: 0.8rem; transition: 0.3s; }
        .logout-btn:hover { background: var(--danger); border-color: var(--danger); }

        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        
        section { background: white; border-radius: 15px; padding: 40px; margin-bottom: 35px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        h2 { color: var(--yonsei-blue); border-left: 5px solid var(--yonsei-blue); padding-left: 15px; margin-bottom: 25px; font-size: 1.6rem; }

        /* 비교 섹션 스타일 */
        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px; }
        .comp-card { padding: 30px; border-radius: 12px; position: relative; overflow: hidden; }
        .comp-card.old { background: #fff5f5; border: 1px solid #ffc9c9; }
        .comp-card.new { background: #f0f7ff; border: 1px solid #b3d7ff; }
        .comp-card h3 { margin-top: 0; display: flex; align-items: center; gap: 10px; }
        .vs-circle { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: white; border: 2px solid #ddd; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 10; }

        .flow-item { display: flex; align-items: center; margin-bottom: 20px; }
        .flow-label { width: 150px; font-weight: 700; color: var(--yonsei-blue); font-size: 0.9rem; }
        .flow-data { flex-grow: 1; background: #f8f9fa; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 0.85rem; border: 1px solid #eee; }

        .tech-table { width: 100%; border-collapse: collapse; }
        .tech-table th { background: #f1f3f5; padding: 15px; text-align: left; font-size: 0.9rem; }
        .tech-table td { padding: 15px; border-bottom: 1px solid #eee; font-size: 0.9rem; }

        @media (max-width: 768px) { .comparison-grid { grid-template-columns: 1fr; } .vs-circle { display: none; } }
    </style>
</head>
<body>

<header>
    <button class="logout-btn" onclick="logout()">LOGOUT</button>
    <h1>ZK-Auth: 영지식 증명 기반 보안 인증 시스템</h1>
    <div class="system-status" id="welcomeUser">Verification Success • Protocol Active</div>
</header>

<div class="container">
    
    <section>
        <h2>1. 인증 패러다임의 변화 (Traditional vs ZK)</h2>
        <div style="position: relative;">
            <div class="vs-circle">VS</div>
            <div class="comparison-grid">
                <div class="comp-card old">
                    <h3 style="color: #c92a2a;">❌ 기존 방식 (ID/PW)</h3>
                    <ul style="font-size: 0.9rem; padding-left: 20px;">
                        <li>사용자의 <b>실제 비밀번호(또는 해시)</b>가 네트워크를 통해 서버로 전송됨</li>
                        <li>서버가 사용자의 비밀을 소유하고 대조함</li>
                        <li>서버 DB 유출 시, 사용자의 모든 보안 정보가 노출됨</li>
                        <li><b>Trust-based:</b> 서비스 업체의 보안 수준을 믿어야 함</li>
                    </ul>
                </div>
                <div class="comp-card new">
                    <h3 style="color: var(--yonsei-blue);">✅ 영지식 방식 (ZK-Auth)</h3>
                    <ul style="font-size: 0.9rem; padding-left: 20px;">
                        <li>비밀번호는 사용자 기기를 <b>절대 벗어나지 않음</b></li>
                        <li>서버는 비밀을 보지 않고 <b>수학적 증명</b>만 확인</li>
                        <li>서버가 해킹되어도 유출될 비밀번호 자체가 없음</li>
                        <li><b>Math-based:</b> 인간이 아닌 수학적 무결성을 신뢰함</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h2>2. 시스템 아키텍처 상세 (Infra Stack)</h2>
        
        <div class="workflow-diagram" style="border: 1px solid #eee; padding: 25px; border-radius: 12px; margin-top: 20px;">
            <div class="flow-item">
                <div class="flow-label">Storage (Supabase)</div>
                <div class="flow-data">Poseidon Hash 기반 사용자 DB 관리 (Cloud PostgreSQL)</div>
            </div>
            <div class="flow-item">
                <div class="flow-label">Verifier (Render)</div>
                <div class="flow-data">Node.js / Express 환경의 독립적 검증 서버 (Groth16 알고리즘)</div>
            </div>
            <div class="flow-item">
                <div class="flow-label">Client (Browser)</div>
                <div class="flow-data">SnarkJS를 이용한 브라우저 내 증명 생성 (Edge Computing)</div>
            </div>
        </div>
    </section>

    <section>
        <h2>3. 실시간 인증 워크플로우</h2>
        
        <div class="workflow-diagram">
            <div class="flow-item">
                <div class="flow-label">① 가입 단계</div>
                <div class="flow-data">Password → [Poseidon Hash] → Supabase 저장</div>
            </div>
            <div class="flow-item">
                <div class="flow-label">② 인증 요청</div>
                <div class="flow-data">ID 입력 → Supabase에서 SavedHash(Public Signal) 로드</div>
            </div>
            <div class="flow-item">
                <div class="flow-label">③ 증명 생성</div>
                <div class="flow-data">Client 연산: { Password, SavedHash, zKey } → Proof 생성</div>
            </div>
            <div class="flow-item" style="border: 2px solid var(--render-teal); padding: 10px; border-radius: 8px; background: #f0fffb;">
                <div class="flow-label">④ 최종 검증</div>
                <div class="flow-data">Render Server: snarkjs.verify(vKey, Proof) → 인증 완료</div>
            </div>
        </div>
    </section>

</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get('user') || 'User';
    document.getElementById('welcomeUser').textContent = `Status: Verified for ${username.toUpperCase()}`;

    function logout() {
        if(confirm("로그아웃 하시겠습니까?")) {
            location.href = 'index.html';
        }
    }
</script>

</body>
</html>